<!DOCTYPE html>
<!-- release v4.3.5, copyright 2014 - 2016 Kartik Visweswaran -->
<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>Krajee JQuery Plugins - &copy; Kartik</title>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
        <script src="../js/jquery.min.js"></script>
        <script src="../js/fileinput.js" type="text/javascript"></script>

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js" type="text/javascript"></script>
    </head>
    <body>
        <div class="container kv-main">

                <div class="form-group">
                    <input id="file-4" type="file" class="file" data-upload-url="1.php" multiple >
                </div>




        </div>
    </body>
	<script>


	$("#file-4").fileinput({
        uploadExtraData:{
            'a':'b',
         },
        uploadAsync:true,
        showUpload: true,//是否显示上传按钮
        showRemove: false,//是否显示删除按钮
        showPreview:true,
        showCancel:true,
        dropZoneEnabled: true,
        maxFileCount: 10,
        msgFilesTooMany: "选择上传的文件数量 超过允许的最大数值！",


        initialPreview: [
            '<img src="Chrysanthemum.jpg">',
        ],
        initialPreviewConfig: [
            {
                caption: 'desert.jpg',
                url: 'http://localhost/avatar/delete', // server delete action
                key: 100,
                extra: {id: 100,'name':1}
            },
        ],
    }).off('filepreupload').on('filepreupload', function() {
    //                                  alert(data.url);
    }).on("fileuploaded", function(event, outData) {
        //文件上传成功后返回的数据， 此处我只保存返回文件的id
        var result = outData.response.id;
        // 对应的input 赋值
    });
        $(".btn-warning").on('click', function() {
            if ($('#file-4').attr('disabled')) {
                $('#file-4').fileinput('enable');
            } else {
                $('#file-4').fileinput('disable');
            }
        });
        $(".btn-info").on('click', function() {
            $('#file-4').fileinput('refresh', {previewClass:'bg-info'});
        });

    /*
    $('#file-4').on('fileselectnone', function() {
        alert('Huh! You selected no files.');
    });
    $('#file-4').on('filebrowse', function() {
        alert('File browse clicked for #file-4');
    });
    */

	</script>
</html>